<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="dark" />
    <meta name="theme-color" content="#000000" />
    <meta name="darkreader-lock" />
    <title>bwts</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      svg {
        width: 1rem;
        height: 1rem;
      }
      .hidden {
        display: none;
      }
    </style>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="noise"></div>

    <main class="shell">
      <div class="card">
        <div class="card-header">
          <h1>bwts</h1>
          <p class="description">
            Generates a Bitwarden-compatible regex URI that still matches on port and path when your Tailscale IP changes.
          </p>
        </div>

        <div class="card-content">
          <!-- URL Input -->
          <div class="field">
            <label for="url-input">Service URL:</label>
            <div class="input-wrapper">
              <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
              <input
                id="url-input"
                type="url"
                placeholder="https://100.92.209.12:3290/login"
                spellcheck="false"
                autocomplete="off"
              />
            </div>
          </div>

          <!-- Switch toggle -->
          <div class="field-row">
            <label class="switch-label" for="allow-both-schemes">
              <div class="switch-text">
                <span class="switch-title">Allow both HTTP &amp; HTTPS?</span>
                <span class="switch-hint">(Uses <code>https?</code> instead of locking to one scheme)</span>
              </div>
            </label>
            <button
              id="allow-both-schemes"
              type="button"
              role="switch"
              aria-checked="true"
              class="switch"
            >
              <span class="switch-thumb"></span>
            </button>
          </div>

          <div class="separator"></div>

          <!-- Generate button -->
          <button id="generate-btn" type="button" class="btn btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
            Get RegEx
          </button>

          <!-- Output -->
          <div class="field" id="output-field">
            <div class="output-header">
              <label for="regex-output">Bitwarden regex URI:</label>
              <button id="copy-btn" type="button" class="btn btn-ghost btn-sm">
                <svg id="copy-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                <svg id="check-icon" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                <span id="copy-label">Copy</span>
              </button>
            </div>
            <textarea id="regex-output" rows="4" readonly placeholder="Regex will appear here..."></textarea>
          </div>

          <p id="status" aria-live="polite"></p>
        </div>
      </div>
    </main>

    <script src="./script.js"></script>
  </body>
</html>
